!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("analog-watch",[],o):"object"==typeof exports?exports["analog-watch"]=o():t["analog-watch"]=o()}(window,function(){return function(t){var o={};function e(i){if(o[i])return o[i].exports;var a=o[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var a in t)e.d(i,a,function(o){return t[o]}.bind(null,a));return i},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p="",e(e.s=0)}([function(t,o,e){"use strict";function i(t,o,e){let i=t;for(;i.length<o;)i=(void 0===e?" ":e)+i;return i}e.r(o);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,o){return!o||"object"!==a(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}function r(t,o){for(var e=0;e<o.length;e++){var i=o[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,o,e){return o&&r(t.prototype,o),e&&r(t,e),t}function l(t){var o="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(t))return o.get(t);o.set(t,e)}function e(){return h(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)})(t)}function h(t,o,e){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,o,e){var i=[null];i.push.apply(i,o);var a=new(Function.bind.apply(t,i));return e&&c(a,e.prototype),a}).apply(null,arguments)}function c(t,o){return(c=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=!1,f={bgColor:"rgba(0, 0, 0, 0)",digitColor:"black",withGradient:!0,displayBackgroundGradient:{from:"LightGrey",to:"white"},displayLineColor:"rgba(0, 0, 0, 0.5)",labelFillColor:"rgba(255, 255, 255, 0.5)",withDisplayShadow:!0,shadowColor:"rgba(0, 0, 0, 0.75)",outlineColor:"DarkGrey",majorTickColor:"black",minorTickColor:"black",handColor:"red",handOutlineColor:"black",withHandShadow:!0,knobColor:"DarkGrey",knobOutlineColor:"black",font:"Arial"},w=function(t){function o(){var t;!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n(this,u(o).call(this)))._shadowRoot=t.attachShadow({mode:"open"}),t.canvas=document.createElement("canvas");var e=document.createElement("h1"),i=document.createTextNode("This is an AnalogWatch, on an HTML5 canvas");return e.appendChild(i),t.canvas.appendChild(e),t.shadowRoot.appendChild(t.canvas),t._value="00:00:00",t._digital_value=0,t._hours_flavor="roman",t._width=150,t._height=150,t._hours_ticks=3,t._minutes_ticks=1,t._with_second_hand=!1,t._with_border=!0,t._label=void 0,t._previousClassName="",t.watchColorConfig=f,d&&console.log("Data in Constructor:",t._value),t}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&c(t,o)}(o,l(HTMLElement)),s(o,null,[{key:"observedAttributes",get:function(){return["width","height","hours-ticks","hours-flavor","minutes-ticks","with-second-hand","with-border","digital-value","label","value"]}}]),s(o,[{key:"connectedCallback",value:function(){d&&console.log("connectedCallback invoked, 'value' is [",this.value,"]")}},{key:"disconnectedCallback",value:function(){d&&console.log("disconnectedCallback invoked")}},{key:"attributeChangedCallback",value:function(t,o,e){switch(d&&console.log("attributeChangedCallback invoked on "+t+" from "+o+" to "+e),t){case"value":this._value=e;break;case"digital-value":this._digital_value=parseInt(e);break;case"hours-flavor":this._hours_flavor=e;break;case"width":this._width=parseInt(e);break;case"height":this._height=parseInt(e);break;case"hours-ticks":this._hours_ticks=parseInt(e);break;case"minutes-ticks":this._minutes_ticks=parseInt(e);break;case"with-second-hand":this._with_second_hand="true"===e;break;case"with-border":this._with_border="true"===e;break;case"label":this._label=e}this.repaint()}},{key:"adoptedCallback",value:function(){d&&console.log("adoptedCallback invoked")}},{key:"repaint",value:function(){this.drawDisplay(this._value)}},{key:"getColorConfig",value:function(t){for(var o=f,e=t.split(" "),i=0;i<e.length;i++)for(var a=e[i],n=0;n<document.styleSheets.length;n++)try{for(var r=0;null!==document.styleSheets[n].cssRules&&r<document.styleSheets[n].cssRules.length;r++){var s=document.styleSheets[n].cssRules[r].selectorText;if(void 0!==s&&(s==="."+a||s.indexOf("."+a)>-1&&s.indexOf("analog-watch")>-1))document.styleSheets[n].cssRules[r].style.cssText.split(";").forEach(function(t){if(t.trim().length>0){var e=t.split(":"),i=e[0].trim(),a=e[1].trim();switch(i){case"--bg-color":o.bgColor=a;break;case"--digit-color":o.digitColor=a;break;case"--with-gradient":o.withGradient="true"===a;break;case"--display-background-gradient-from":o.displayBackgroundGradient.from=a;break;case"--display-background-gradient-to":o.displayBackgroundGradient.to=a;break;case"--display-line-color":o.displayLineColor=a;break;case"--label-fill-color":o.labelFillColor=a;break;case"--with-display-shadow":o.withDisplayShadow="true"===a;break;case"--shadow-color":o.shadowColor=a;break;case"--outline-color":o.outlineColor=a;break;case"--major-tick-color":o.majorTickColor=a;break;case"--minor-tick-color":o.minorTickColor=a;break;case"--hand-color":o.handColor=a;break;case"--hand-outline-color":o.handOutlineColor=a;break;case"--with-hand-shadow":o.withHandShadow="true"===a;break;case"--knob-color":o.knobColor=a;break;case"--knob-outline-color":o.knobOutlineColor=a;break;case"--font":o.font=a}}})}}catch(t){}return o}},{key:"drawDisplay",value:function(t){var o=this.className;this._previousClassName;try{this.watchColorConfig=this.getColorConfig(o)}catch(t){console.log(t)}this._previousClassName=o;var e=this.watchColorConfig.digitColor,a=this.canvas.getContext("2d");a.clearRect(0,0,this.width,this.height);var n=Math.min(this.width,this.height)/2*.9;this.canvas.width=this.width,this.canvas.height=this.height;var r=n/100;if(a.fillStyle=this.watchColorConfig.bgColor,a.fillRect(0,0,this.canvas.width,this.canvas.height),a.beginPath(),!0===this.withBorder&&(a.arc(this.canvas.width/2,n+10,n,0,2*Math.PI,!1),a.lineWidth=5),this.watchColorConfig.withGradient){var s=a.createLinearGradient(0,5,0,n);s.addColorStop(0,this.watchColorConfig.displayBackgroundGradient.from),s.addColorStop(1,this.watchColorConfig.displayBackgroundGradient.to),a.fillStyle=s}else a.fillStyle=this.watchColorConfig.displayBackgroundGradient.to;this.watchColorConfig.withDisplayShadow?(a.shadowOffsetX=3,a.shadowOffsetY=3,a.shadowBlur=3,a.shadowColor=this.watchColorConfig.shadowColor):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.shadowColor=void 0),a.lineJoin="round",a.fill(),a.strokeStyle=this.watchColorConfig.outlineColor,a.stroke(),a.closePath(),a.beginPath();for(var l=0;l<12;l+=1){var h=this.canvas.width/2-.95*n*Math.cos(2*Math.PI*(l/12)),c=n+10-.95*n*Math.sin(2*Math.PI*(l/12)),u=this.canvas.width/2-.85*n*Math.cos(2*Math.PI*(l/12)),d=n+10-.85*n*Math.sin(2*Math.PI*(l/12));a.moveTo(h,c),a.lineTo(u,d)}if(a.lineWidth=3,a.strokeStyle=this.watchColorConfig.majorTickColor,a.stroke(),a.closePath(),this.minutesTicks>0){a.beginPath();for(var f=0;f<60;f+=this.minutesTicks){var w=this.canvas.width/2-.95*n*Math.cos(2*Math.PI*(f/60)),b=n+10-.95*n*Math.sin(2*Math.PI*(f/60)),g=this.canvas.width/2-.9*n*Math.cos(2*Math.PI*(f/60)),C=n+10-.9*n*Math.sin(2*Math.PI*(f/60));a.moveTo(w,b),a.lineTo(g,C)}a.lineWidth=1,a.strokeStyle=this.watchColorConfig.minorTickColor,a.stroke(),a.closePath()}a.beginPath();for(var v=0;v<12;v+=this.hoursTicks){a.save(),a.translate(this.canvas.width/2,n+10),a.rotate(2*Math.PI*(v/12)),a.font="bold "+Math.round(15*r)+"px Arial",a.fillStyle=e;var k="roman"===this._hours_flavor?this.toRomanDigit(0===v?12:v):(0===v?12:v).toString(),p=a.measureText(k).width;a.fillText(k,-p/2,-.8*n+10),a.lineWidth=1,a.strokeStyle=this.watchColorConfig.valueOutlineColor,a.strokeText(k,-p/2,-.8*n+10),a.restore()}a.closePath();var y=t.split(":"),_=0,m=0,M=0;if(void 0!==y[0]&&(_=parseInt(y[0])),void 0!==y[1]&&(m=parseInt(y[1])),void 0!==y[2]&&(M=parseInt(y[2])),this._digital_value>0){var P,I=i(_.toString(),2,"0")+":"+i(m.toString(),2,"0")+(6===this._digital_value?":"+i(M.toString(),2,"0"):"");a.font="bold "+Math.round(20*r)+"px "+this.watchColorConfig.font,P=a.measureText(I).width,a.beginPath(),a.fillStyle=this.watchColorConfig.labelFillColor,a.fillText(I,this.canvas.width/2-P/2,n-10*r),a.lineWidth=1,a.strokeStyle=this.watchColorConfig.valueOutlineColor,a.strokeText(I,this.canvas.width/2-P/2,n-10*r),a.closePath()}if(void 0!==this.label){var S,T=this.label;a.font="bold "+Math.round(20*r)+"px "+this.watchColorConfig.font,S=a.measureText(T).width,a.beginPath(),a.fillStyle=this.watchColorConfig.labelFillColor,a.fillText(T,this.canvas.width/2-S/2,2*n-20*r*2.1),a.lineWidth=1,a.strokeStyle=this.watchColorConfig.valueOutlineColor,a.strokeText(T,this.canvas.width/2-S/2,2*n-20*r*2.1),a.closePath()}var O=_%12*30+(6*m+M/10)/12;a.beginPath(),this.watchColorConfig.withHandShadow&&(a.shadowColor=this.watchColorConfig.shadowColor,a.shadowOffsetX=3,a.shadowOffsetY=3,a.shadowBlur=3),a.moveTo(this.canvas.width/2,n+10);var x=this.canvas.width/2-.05*n*Math.cos(2*Math.PI*(O/360)),j=n+10-.05*n*Math.sin(2*Math.PI*(O/360));a.lineTo(x,j),x=this.canvas.width/2-.6*n*Math.cos(2*Math.PI*(O/360)+Math.PI/2),j=n+10-.6*n*Math.sin(2*Math.PI*(O/360)+Math.PI/2),a.lineTo(x,j),x=this.canvas.width/2-.05*n*Math.cos(2*Math.PI*(O/360)+2*Math.PI/2),j=n+10-.05*n*Math.sin(2*Math.PI*(O/360)+2*Math.PI/2),a.lineTo(x,j),a.closePath(),a.fillStyle=this.watchColorConfig.handColor,a.fill(),a.lineWidth=1,a.strokeStyle=this.watchColorConfig.handOutlineColor,a.stroke();var R=6*m+M/10;a.beginPath(),this.watchColorConfig.withHandShadow&&(a.shadowColor=this.watchColorConfig.shadowColor,a.shadowOffsetX=3,a.shadowOffsetY=3,a.shadowBlur=3),a.moveTo(this.canvas.width/2,n+10);var B=this.canvas.width/2-.05*n*Math.cos(2*Math.PI*(R/360)),G=n+10-.05*n*Math.sin(2*Math.PI*(R/360));if(a.lineTo(B,G),B=this.canvas.width/2-.8*n*Math.cos(2*Math.PI*(R/360)+Math.PI/2),G=n+10-.8*n*Math.sin(2*Math.PI*(R/360)+Math.PI/2),a.lineTo(B,G),B=this.canvas.width/2-.05*n*Math.cos(2*Math.PI*(R/360)+2*Math.PI/2),G=n+10-.05*n*Math.sin(2*Math.PI*(R/360)+2*Math.PI/2),a.lineTo(B,G),a.closePath(),a.fillStyle=this.watchColorConfig.handColor,a.fill(),a.lineWidth=1,a.strokeStyle=this.watchColorConfig.handOutlineColor,a.stroke(),this._with_second_hand){var A=6*M;a.beginPath(),this.watchColorConfig.withHandShadow&&(a.shadowColor=this.watchColorConfig.shadowColor,a.shadowOffsetX=3,a.shadowOffsetY=3,a.shadowBlur=3),a.moveTo(this.canvas.width/2,n+10);var D=this.canvas.width/2-.95*n*Math.cos(2*Math.PI*(A/360)+Math.PI/2),W=n+10-.95*n*Math.sin(2*Math.PI*(A/360)+Math.PI/2);a.lineTo(D,W),a.closePath(),a.lineWidth=2,a.strokeStyle=this.watchColorConfig.handOutlineColor,a.stroke()}a.beginPath(),a.arc(this.canvas.width/2,n+10,7,0,2*Math.PI,!1),a.closePath(),a.fillStyle=this.watchColorConfig.knobColor,a.fill(),a.strokeStyle=this.watchColorConfig.knobOutlineColor,a.stroke()}},{key:"toRomanDigit",value:function(t){var o="";switch(t){case 1:o="I";break;case 2:o="II";break;case 3:o="III";break;case 4:o="IIII";break;case 5:o="V";break;case 6:o="VI";break;case 7:o="VII";break;case 8:o="VIII";break;case 9:o="IX";break;case 10:o="X";break;case 11:o="XI";break;case 0:case 12:o="XII"}return o}},{key:"value",set:function(t){this.setAttribute("value",t),d&&console.log(">> Value option:",t)},get:function(){return this._value}},{key:"digitalValue",set:function(t){this._digital_value=t},get:function(){return this._digital_value}},{key:"hoursFlavor",set:function(t){this._hours_flavor=t},get:function(){return this._hours_flavor}},{key:"width",set:function(t){this.setAttribute("width",t)},get:function(){return this._width}},{key:"height",set:function(t){this.setAttribute("height",t)},get:function(){return this._height}},{key:"hoursTicks",set:function(t){this.setAttribute("hours-ticks",t)},get:function(){return this._hours_ticks}},{key:"minutesTicks",set:function(t){this.setAttribute("minutes-ticks",t)},get:function(){return this._minutes_ticks}},{key:"withSecondHand",set:function(t){this.setAttribute("with-second-hand",t)},get:function(){return this._with_second_hand}},{key:"withBorder",set:function(t){this.setAttribute("with-border",t)},get:function(){return this._with_border}},{key:"label",set:function(t){this.setAttribute("label",t)},get:function(){return this._label}},{key:"shadowRoot",set:function(t){this._shadowRoot=t},get:function(){return this._shadowRoot}}]),o}();window.customElements.define("analog-watch",w)}])});
//# sourceMappingURL=analog-watch.min.js.map